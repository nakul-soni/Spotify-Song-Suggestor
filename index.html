<!DOCTYPE html>
<html lang="en" ng-app="soundtrackApp" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="AI-powered Personal Soundtrack Generator - Create Spotify playlists based on your mood, weather, and location">
  <title>Personal Soundtrack Generator | AI-Powered Spotify Playlists</title>
  
  <!-- Tailwind CSS v3.4.10 CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Tailwind Config -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          animation: {
            'pulse-gradient': 'pulse-gradient 2s ease-in-out infinite',
            'float': 'float 6s ease-in-out infinite',
            'spin-slow': 'spin 20s linear infinite',
            'shimmer': 'shimmer 2s linear infinite',
            'vinyl-spin': 'vinyl-spin 3s linear infinite',
          },
          colors: {
            spotify: '#1DB954',
            'mood-happy': '#FFD700',
            'mood-chill': '#667EEA',
            'mood-focus': '#4ECDC4',
            'mood-energetic': '#FF6B6B',
            'mood-nostalgic': '#A8E6CF',
            'mood-neutral': '#2C3E50',
          },
          keyframes: {
            'pulse-gradient': {
              '0%, 100%': { backgroundPosition: '0% 50%' },
              '50%': { backgroundPosition: '100% 50%' },
            },
            'float': {
              '0%, 100%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-20px)' },
            },
            'shimmer': {
              '0%': { backgroundPosition: '-1000px 0' },
              '100%': { backgroundPosition: '1000px 0' },
            },
            'vinyl-spin': {
              '0%': { transform: 'rotate(0deg)' },
              '100%': { transform: 'rotate(360deg)' },
            },
          },
        }
      }
    }
  </script>
  
  <!-- AngularJS 1.8.2 -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-route.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-animate.min.js"></script>
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="styles.css">
  
  <style>
    /* Immediate visibility styles - no JS dependency */
    body { margin: 0; padding: 0; }
    .hero-content { opacity: 1; visibility: visible; }
    /* Glassmorphism */
    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    .dark .glass {
      background: rgba(15, 15, 35, 0.7);
    }
    /* Vinyl spinner */
    .vinyl-spinner {
      animation: vinyl-spin 3s linear infinite;
    }
    @keyframes vinyl-spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white min-h-screen" ng-controller="MainController">
  
  <!-- Navigation Header -->
  <header class="fixed top-0 left-0 right-0 z-50 glass border-b border-white/10">
    <nav class="container mx-auto px-4 py-4 flex items-center justify-between">
      <a href="#/" class="flex items-center space-x-2 text-2xl font-bold bg-gradient-to-r from-spotify to-purple-400 bg-clip-text text-transparent">
        <span class="text-3xl">üéµ</span>
        <span>SoundtrackGen</span>
      </a>
      
      <div class="hidden md:flex items-center space-x-6">
        <a href="#/" class="hover:text-spotify transition-colors">Home</a>
        <a href="#/dashboard" class="hover:text-spotify transition-colors">Dashboard</a>
        <a href="#/profile" class="hover:text-spotify transition-colors">Profile</a>
      </div>
      
      <div class="flex items-center space-x-4">
        <button 
          ng-click="toggleDarkMode()" 
          class="p-2 rounded-full hover:bg-white/10 transition-colors"
          aria-label="Toggle dark mode"
        >
          <span ng-if="!darkMode" class="text-2xl">üåô</span>
          <span ng-if="darkMode" class="text-2xl">‚òÄÔ∏è</span>
        </button>
        
        <div ng-if="auth.isAuthenticated" class="flex items-center space-x-4">
          <div class="relative group">
            <img 
              ng-src="{{auth.currentUser.avatar}}" 
              alt="User avatar"
              class="w-10 h-10 rounded-full cursor-pointer ring-2 ring-spotify"
            >
            <div class="absolute right-0 mt-2 w-48 bg-slate-800 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
              <a href="#/profile" class="block px-4 py-2 hover:bg-slate-700 rounded-t-lg">Profile</a>
              <button ng-click="logout()" class="block w-full text-left px-4 py-2 hover:bg-slate-700 rounded-b-lg">Logout</button>
            </div>
          </div>
        </div>
        
        <div ng-if="!auth.isAuthenticated" class="flex items-center space-x-2">
          <a href="#/login" class="px-4 py-2 rounded-lg hover:bg-white/10 transition-colors">Login</a>
          <a href="#/signup" class="px-4 py-2 bg-spotify rounded-lg hover:bg-green-600 transition-colors font-semibold">Sign Up</a>
        </div>
      </div>
    </nav>
  </header>
  
  <!-- Main Content - IMMEDIATELY VISIBLE -->
  <main class="min-h-screen pt-20">
    <div ng-view class="animate-fade-in"></div>
  </main>
  
  <!-- Footer -->
  <footer class="bg-slate-950 text-gray-300 py-12 mt-20">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
        <div>
          <h3 class="text-xl font-bold mb-4 text-white">SoundtrackGen</h3>
          <p class="text-gray-400">Your life's soundtrack, generated by AI.</p>
        </div>
        <div>
          <h4 class="font-semibold mb-4 text-white">Product</h4>
          <ul class="space-y-2 text-gray-400">
            <li><a href="#/" class="hover:text-spotify transition-colors">Features</a></li>
            <li><a href="#/dashboard" class="hover:text-spotify transition-colors">Dashboard</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-4 text-white">Legal</h4>
          <ul class="space-y-2 text-gray-400">
            <li><a href="#" class="hover:text-spotify transition-colors">Privacy Policy</a></li>
            <li><a href="#" class="hover:text-spotify transition-colors">Terms of Service</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-4 text-white">Connect</h4>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-spotify transition-colors">üê¶</a>
            <a href="#" class="text-gray-400 hover:text-spotify transition-colors">üíª</a>
          </div>
        </div>
      </div>
      <div class="border-t border-gray-800 pt-8 text-center text-gray-400">
        <p>&copy; 2025 SoundtrackGen. All rights reserved.</p>
      </div>
    </div>
  </footer>
  
  <!-- Loading Overlay -->
  <div id="loading-overlay" class="fixed inset-0 bg-slate-900/90 z-50 flex items-center justify-center hidden">
    <div class="text-center">
      <div class="vinyl-spinner w-24 h-24 mx-auto mb-4">
        <svg viewBox="0 0 100 100" class="w-full h-full">
          <circle cx="50" cy="50" r="45" fill="#1DB954" opacity="0.3"/>
          <circle cx="50" cy="50" r="35" fill="none" stroke="#1DB954" stroke-width="2"/>
          <circle cx="50" cy="50" r="5" fill="#1DB954"/>
        </svg>
      </div>
      <p class="text-white text-lg animate-pulse">Generating your soundtrack...</p>
    </div>
  </div>
  
  <!-- INLINE TEMPLATES -->
  <script type="text/ng-template" id="views/home.html">
    <!-- Hero Section - IMMEDIATELY VISIBLE -->
    <section class="relative min-h-screen flex items-center justify-center overflow-hidden hero-content">
      <div class="absolute inset-0 bg-gradient-to-br from-purple-900/50 via-slate-900/50 to-pink-900/50"></div>
      
      <div class="container mx-auto px-4 py-20 relative z-10">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          <!-- LEFT: Text Content -->
          <div class="text-center lg:text-left">
            <h1 class="text-5xl md:text-7xl font-bold mb-6 animate-slide-up">
              Your Life's
              <span class="bg-gradient-to-r from-purple-400 via-pink-400 to-spotify bg-clip-text text-transparent">
                Soundtrack
              </span>
            </h1>
            
            <h2 class="text-xl md:text-2xl text-gray-300 mb-8 max-w-2xl mx-auto lg:mx-0">
              AI generates Spotify playlists from your mood, weather & moments
            </h2>
            
            <div class="space-y-4 mb-8 text-left max-w-md mx-auto lg:mx-0">
              <div class="flex items-center space-x-3">
                <span class="text-2xl">üéµ</span>
                <span>Mood-based playlist generation</span>
              </div>
              <div class="flex items-center space-x-3">
                <span class="text-2xl">üå§Ô∏è</span>
                <span>Weather & location context</span>
              </div>
              <div class="flex items-center space-x-3">
                <span class="text-2xl">‚ö°</span>
                <span>Instant Spotify sync</span>
              </div>
            </div>
            
            <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
              <a 
                href="#/spotify-connect" 
                class="px-8 py-4 bg-spotify rounded-full text-white font-semibold text-lg hover:bg-green-600 transition-all hover:scale-105 text-center"
              >
                üéß Connect Spotify
              </a>
              <button 
                class="px-8 py-4 glass rounded-full text-white font-semibold text-lg hover:bg-white/20 transition-all hover:scale-105"
                onclick="alert('Demo video coming soon!')"
              >
                ‚ñ∂Ô∏è See Demo
              </button>
            </div>
          </div>
          
          <!-- RIGHT: Mock Playlist Card -->
          <div class="hidden lg:block">
            <div class="glass p-6 rounded-2xl max-w-md mx-auto transform hover:scale-105 transition-transform">
              <img src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=400&fit=crop" alt="Playlist" class="w-full rounded-xl mb-4">
              <h3 class="text-xl font-bold mb-2">Rainy Evening Chill</h3>
              <p class="text-gray-400 mb-4">Bon Iver, Tame Impala, Lana Del Rey</p>
              <div class="flex items-center space-x-2">
                <span class="px-3 py-1 bg-mood-chill/30 rounded-full text-sm">Chill</span>
                <span class="text-gray-400">‚Ä¢</span>
                <span class="text-gray-400">12 tracks</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Features Section -->
    <section class="py-20 bg-slate-800/50">
      <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold text-center mb-16">Powerful Features</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          <div class="glass p-8 rounded-2xl hover:scale-105 transition-transform text-center">
            <div class="text-5xl mb-4">üéµ</div>
            <h3 class="text-2xl font-bold mb-4">Mood Capture</h3>
            <p class="text-gray-300">Capture your emotions in real-time with weather, location, and time context.</p>
          </div>
          
          <div class="glass p-8 rounded-2xl hover:scale-105 transition-transform text-center">
            <div class="text-5xl mb-4">ü§ñ</div>
            <h3 class="text-2xl font-bold mb-4">AI Playlist Gen</h3>
            <p class="text-gray-300">Advanced AI creates personalized playlists matching your exact mood.</p>
          </div>
          
          <div class="glass p-8 rounded-2xl hover:scale-105 transition-transform text-center">
            <div class="text-5xl mb-4">üìä</div>
            <h3 class="text-2xl font-bold mb-4">Timeline View</h3>
            <p class="text-gray-300">Visualize your emotional journey through an interactive timeline.</p>
          </div>
          
          <div class="glass p-8 rounded-2xl hover:scale-105 transition-transform text-center">
            <div class="text-5xl mb-4">üéß</div>
            <h3 class="text-2xl font-bold mb-4">Spotify Integration</h3>
            <p class="text-gray-300">Seamlessly sync playlists directly to your Spotify account.</p>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Sample Moments Gallery -->
    <section class="py-20">
      <div class="container mx-auto px-4">
        <h2 class="text-4xl font-bold text-center mb-16">Sample Moments</h2>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div ng-repeat="moment in sampleMoments" class="relative overflow-hidden rounded-xl aspect-square group cursor-pointer hover:scale-105 transition-transform">
            <img 
              ng-src="{{moment.image}}" 
              alt="{{moment.title}}"
              class="w-full h-full object-cover blur-sm group-hover:blur-none transition-all"
            >
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-4">
              <div class="text-white">
                <p class="font-semibold">{{moment.title}}</p>
                <p class="text-sm capitalize">{{moment.mood}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </script>
  
  <script type="text/ng-template" id="views/login.html">
    <div class="min-h-screen flex items-center justify-center py-20 px-4">
      <div class="w-full max-w-md">
        <div class="glass p-8 rounded-2xl shadow-2xl">
          <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-2">Welcome Back</h1>
            <p class="text-gray-400">Sign in to continue your musical journey</p>
          </div>
          
          <form ng-submit="submit()" class="space-y-6">
            <div ng-if="error" class="bg-red-500/20 border border-red-500 rounded-lg p-4 text-red-200">
              {{error}}
            </div>
            
            <div>
              <label for="email" class="block text-sm font-medium mb-2">Email</label>
              <input 
                type="email" 
                id="email" 
                ng-model="email" 
                required
                class="w-full px-4 py-3 rounded-lg bg-slate-800 border border-slate-700 focus:ring-2 focus:ring-spotify focus:border-transparent outline-none text-white"
                placeholder="you@example.com"
              >
            </div>
            
            <div>
              <label for="password" class="block text-sm font-medium mb-2">Password</label>
              <input 
                type="password" 
                id="password" 
                ng-model="password" 
                required
                class="w-full px-4 py-3 rounded-lg bg-slate-800 border border-slate-700 focus:ring-2 focus:ring-spotify focus:border-transparent outline-none text-white"
                placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              >
            </div>
            
            <button 
              type="submit" 
              ng-disabled="loading"
              class="w-full bg-spotify py-3 rounded-lg font-semibold text-lg hover:bg-green-600 transition-colors disabled:opacity-50"
            >
              <span ng-if="!loading">Sign In</span>
              <span ng-if="loading">Signing in...</span>
            </button>
          </form>
          
          <div class="mt-6 text-center">
            <p class="text-gray-400">
              Don't have an account? 
              <a href="#/signup" class="text-spotify hover:underline">Sign up</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </script>
  
  <script type="text/ng-template" id="views/signup.html">
    <div class="min-h-screen flex items-center justify-center py-20 px-4">
      <div class="w-full max-w-md">
        <div class="glass p-8 rounded-2xl shadow-2xl">
          <div class="text-center mb-8">
            <h1 class="text-4xl font-bold mb-2">Create Account</h1>
            <p class="text-gray-400">Start generating your personal soundtracks</p>
          </div>
          
          <form ng-submit="submit()" class="space-y-6">
            <div ng-if="error" class="bg-red-500/20 border border-red-500 rounded-lg p-4 text-red-200">
              {{error}}
            </div>
            
            <div>
              <label for="name" class="block text-sm font-medium mb-2">Full Name</label>
              <input 
                type="text" 
                id="name" 
                ng-model="name" 
                required
                class="w-full px-4 py-3 rounded-lg bg-slate-800 border border-slate-700 focus:ring-2 focus:ring-spotify focus:border-transparent outline-none text-white"
                placeholder="John Doe"
              >
            </div>
            
            <div>
              <label for="email" class="block text-sm font-medium mb-2">Email</label>
              <input 
                type="email" 
                id="email" 
                ng-model="email" 
                required
                class="w-full px-4 py-3 rounded-lg bg-slate-800 border border-slate-700 focus:ring-2 focus:ring-spotify focus:border-transparent outline-none text-white"
                placeholder="you@example.com"
              >
            </div>
            
            <div>
              <label for="password" class="block text-sm font-medium mb-2">Password</label>
              <input 
                type="password" 
                id="password" 
                ng-model="password" 
                required
                minlength="6"
                class="w-full px-4 py-3 rounded-lg bg-slate-800 border border-slate-700 focus:ring-2 focus:ring-spotify focus:border-transparent outline-none text-white"
                placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              >
            </div>
            
            <button 
              type="submit" 
              ng-disabled="loading"
              class="w-full bg-spotify py-3 rounded-lg font-semibold text-lg hover:bg-green-600 transition-colors disabled:opacity-50"
            >
              <span ng-if="!loading">Create Account</span>
              <span ng-if="loading">Creating...</span>
            </button>
          </form>
          
          <div class="mt-6 text-center">
            <p class="text-gray-400">
              Already have an account? 
              <a href="#/login" class="text-spotify hover:underline">Sign in</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </script>
  
  <script type="text/ng-template" id="views/spotify-connect.html">
    <div class="min-h-screen flex items-center justify-center py-20 px-4">
      <div class="w-full max-w-2xl">
        <div class="glass p-12 rounded-2xl shadow-2xl text-center">
          <div class="mb-8">
            <div class="w-24 h-24 mx-auto mb-6 bg-spotify rounded-full flex items-center justify-center">
              <span class="text-5xl">üéß</span>
            </div>
            <h1 class="text-4xl font-bold mb-4">Connect Your Spotify Account</h1>
            <p class="text-gray-400 text-lg">
              Connect your Spotify account to start generating personalized playlists.
            </p>
          </div>
          
          <div class="bg-slate-800 rounded-lg p-6 mb-8 text-left">
            <h3 class="font-semibold mb-4">What you'll get:</h3>
            <ul class="space-y-2 text-gray-300">
              <li class="flex items-center space-x-2">
                <span class="text-spotify">‚úì</span>
                <span>Automatically generated playlists synced to Spotify</span>
              </li>
              <li class="flex items-center space-x-2">
                <span class="text-spotify">‚úì</span>
                <span>Access to your listening history</span>
              </li>
              <li class="flex items-center space-x-2">
                <span class="text-spotify">‚úì</span>
                <span>Seamless integration with existing playlists</span>
              </li>
            </ul>
          </div>
          
          <button 
            ng-click="connect()" 
            ng-disabled="connecting"
            class="bg-spotify px-12 py-4 rounded-full text-white font-semibold text-lg hover:bg-green-600 transition-colors disabled:opacity-50"
          >
            <span ng-if="!connecting">Connect with Spotify</span>
            <span ng-if="connecting">Connecting...</span>
          </button>
        </div>
      </div>
    </div>
  </script>
  
  <script type="text/ng-template" id="views/dashboard.html">
    <div class="container mx-auto px-4 py-8">
      <div class="flex flex-col md:flex-row justify-between items-center mb-8">
        <div>
          <h1 class="text-4xl font-bold mb-2">Create Your Soundtrack</h1>
          <p class="text-gray-400">Capture this moment and let AI generate your perfect playlist</p>
        </div>
        
        <div ng-if="!spotify.isConnected" class="mt-4 md:mt-0">
          <a href="#/spotify-connect" class="bg-spotify px-6 py-3 rounded-lg text-white font-semibold hover:bg-green-600 transition-colors inline-flex items-center space-x-2">
            <span>üéß</span>
            <span>Connect Spotify</span>
          </a>
        </div>
        
        <div ng-if="spotify.isConnected" class="mt-4 md:mt-0 flex items-center space-x-2 text-spotify">
          <span>‚úì</span>
          <span>Spotify Connected</span>
        </div>
      </div>
      
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Mood Creator Form -->
        <div class="lg:col-span-2">
          <div class="glass p-8 rounded-2xl">
            <h2 class="text-2xl font-bold mb-6">Mood & Context</h2>
            
            <div class="mb-6">
              <label class="block text-sm font-medium mb-2">Weather</label>
              <div class="flex items-center space-x-4 p-4 bg-slate-800 rounded-lg">
                <span class="text-4xl">{{moodData.weather.icon}}</span>
                <div>
                  <p class="font-semibold">{{moodData.weather.temp}}¬∞C - {{moodData.weather.description}}</p>
                  <p class="text-sm text-gray-400">Auto-detected from location</p>
                </div>
              </div>
            </div>
            
            <div class="mb-6">
              <label class="block text-sm font-medium mb-2">Location</label>
              <input 
                type="text" 
                ng-model="moodData.location"
                class="w-full px-4 py-3 rounded-lg bg-slate-800 border border-slate-700 focus:ring-2 focus:ring-spotify focus:border-transparent outline-none text-white"
                placeholder="New York, NY"
              >
            </div>
            
            <div class="mb-6">
              <label class="block text-sm font-medium mb-2">Time of Day</label>
              <div class="flex flex-wrap gap-2">
                <button 
                  ng-repeat="time in ['morning', 'afternoon', 'evening', 'night']"
                  ng-click="moodData.time = time"
                  ng-class="{'bg-spotify text-white': moodData.time === time, 'bg-slate-800 text-gray-300': moodData.time !== time}"
                  class="px-4 py-2 rounded-lg font-medium transition-colors capitalize"
                >
                  {{time}}
                </button>
              </div>
            </div>
            
            <div class="mb-8">
              <label class="block text-sm font-medium mb-4">How are you feeling?</label>
              <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <button 
                  ng-repeat="mood in moods"
                  ng-click="selectMood(mood)"
                  ng-class="{'ring-4 ring-white ring-opacity-50': moodData.mood === mood.id, mood.gradient: true}"
                  class="p-6 rounded-xl text-center font-semibold transition-all text-white border-2"
                  ng-style="{'border-color': moodData.mood === mood.id ? mood.color : 'transparent'}"
                >
                  <div class="text-3xl mb-2">{{mood.emoji}}</div>
                  <div>{{mood.label}}</div>
                </button>
              </div>
            </div>
            
            <button 
              ng-click="generatePlaylist()"
              ng-disabled="generating || !moodData.mood"
              class="w-full py-4 rounded-lg font-bold text-lg bg-gradient-to-r from-spotify to-purple-600 text-white hover:from-green-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <span ng-if="!generating" class="flex items-center justify-center space-x-2">
                <span>üéµ</span>
                <span>Generate Soundtrack</span>
              </span>
              <span ng-if="generating" class="flex items-center justify-center space-x-2">
                <span class="vinyl-spinner w-6 h-6"></span>
                <span>Generating...</span>
              </span>
            </button>
          </div>
        </div>
        
        <!-- Timeline & Recent Moments -->
        <div class="space-y-6">
          <div class="glass p-6 rounded-2xl">
            <h3 class="text-xl font-bold mb-4">Your Timeline</h3>
            <div class="relative">
              <svg class="w-full h-64" viewBox="0 0 200 200">
                <line x1="100" y1="0" x2="100" y2="200" stroke="#1DB954" stroke-width="2" class="timeline-line"/>
                <circle cx="100" cy="50" r="8" fill="#1DB954" class="animate-float"/>
                <circle cx="100" cy="100" r="8" fill="#667EEA" class="animate-float" style="animation-delay: 0.5s"/>
                <circle cx="100" cy="150" r="8" fill="#FF6B6B" class="animate-float" style="animation-delay: 1s"/>
              </svg>
            </div>
          </div>
          
          <div class="glass p-6 rounded-2xl">
            <h3 class="text-xl font-bold mb-4">Recent Moments</h3>
            <div class="space-y-4" ng-if="recentMoments.length > 0">
              <a 
                ng-repeat="moment in recentMoments"
                href="#/moment/{{moment.id}}"
                class="block p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors"
              >
                <div class="flex items-center space-x-4">
                  <img ng-src="{{moment.coverImage}}" alt="Playlist" class="w-16 h-16 rounded-lg object-cover">
                  <div class="flex-1 min-w-0">
                    <p class="font-semibold truncate">{{moment.name}}</p>
                    <p class="text-sm text-gray-400 capitalize">{{moment.mood}}</p>
                  </div>
                </div>
              </a>
            </div>
            <div ng-if="recentMoments.length === 0" class="text-center py-8 text-gray-500">
              <p>No moments yet. Create your first soundtrack!</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </script>
  
  <script type="text/ng-template" id="views/moment-detail.html">
    <div class="container mx-auto px-4 py-8">
      <a href="#/dashboard" class="inline-flex items-center space-x-2 text-gray-400 hover:text-spotify transition-colors mb-6">
        <span>‚Üê</span>
        <span>Back to Dashboard</span>
      </a>
      
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="lg:col-span-2 space-y-6">
          <div class="glass p-8 rounded-2xl">
            <div class="flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6">
              <img 
                ng-src="{{moment.coverImage}}" 
                alt="Playlist"
                class="w-48 h-48 rounded-2xl object-cover shadow-xl"
              >
              <div class="flex-1">
                <h1 class="text-4xl font-bold mb-2">{{moment.name}}</h1>
                <p class="text-gray-400 mb-4">{{moment.tracks.length}} tracks</p>
                <button 
                  ng-click="openSpotify()"
                  class="bg-spotify px-6 py-3 rounded-lg text-white font-semibold hover:bg-green-600 transition-colors inline-flex items-center space-x-2"
                >
                  <span>‚ñ∂</span>
                  <span>Play on Spotify</span>
                </button>
              </div>
            </div>
          </div>
          
          <div class="glass p-6 rounded-2xl">
            <h2 class="text-2xl font-bold mb-6">Tracks</h2>
            <div class="space-y-4">
              <div 
                ng-repeat="track in moment.tracks"
                class="flex items-center space-x-4 p-4 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors cursor-pointer"
              >
                <div class="w-12 h-12 rounded-lg overflow-hidden flex-shrink-0">
                  <img ng-src="{{track.image}}" alt="{{track.album}}" class="w-full h-full object-cover">
                </div>
                <div class="flex-1 min-w-0">
                  <p class="font-semibold truncate">{{track.name}}</p>
                  <p class="text-sm text-gray-400 truncate">{{track.artist}}</p>
                </div>
                <div class="text-gray-400">{{track.duration}}</div>
                <button class="w-10 h-10 rounded-full bg-spotify flex items-center justify-center hover:scale-110 transition-transform">
                  <span class="text-white">‚ñ∂</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="space-y-6">
          <div class="glass p-6 rounded-2xl">
            <h3 class="text-xl font-bold mb-4">Mood Context</h3>
            <div class="space-y-4">
              <div class="flex items-center space-x-3">
                <span class="text-2xl">{{moment.weather.icon || 'üå§Ô∏è'}}</span>
                <div>
                  <p class="font-semibold capitalize">{{moment.mood}}</p>
                  <p class="text-sm text-gray-400">{{moment.weather.description || 'Sunny'}}</p>
                </div>
              </div>
              <div class="flex items-center space-x-3">
                <span class="text-2xl">üìç</span>
                <p class="text-gray-400">{{moment.location}}</p>
              </div>
              <div class="flex items-center space-x-3">
                <span class="text-2xl">üïê</span>
                <p class="text-gray-400 capitalize">{{moment.time}}</p>
              </div>
            </div>
          </div>
          
          <div class="glass p-6 rounded-2xl" ng-if="relatedMoments.length > 0">
            <h3 class="text-xl font-bold mb-4">Related Moments</h3>
            <div class="space-y-3">
              <a 
                ng-repeat="related in relatedMoments"
                href="#/moment/{{related.id}}"
                class="block p-3 bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors"
              >
                <div class="flex items-center space-x-3">
                  <img ng-src="{{related.coverImage}}" alt="Related" class="w-12 h-12 rounded-lg object-cover">
                  <div class="flex-1 min-w-0">
                    <p class="font-semibold text-sm truncate">{{related.name}}</p>
                    <p class="text-xs text-gray-400 capitalize">{{related.mood}}</p>
                  </div>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </script>
  
  <script type="text/ng-template" id="views/profile.html">
    <div class="container mx-auto px-4 py-8">
      <div class="max-w-4xl mx-auto">
        <h1 class="text-4xl font-bold mb-8">Profile Settings</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div class="md:col-span-2 space-y-6">
            <div class="glass p-6 rounded-2xl">
              <h2 class="text-2xl font-bold mb-6">Account Information</h2>
              <div class="flex items-center space-x-6 mb-6">
                <img 
                  ng-src="{{user.avatar}}" 
                  alt="User"
                  class="w-24 h-24 rounded-full ring-4 ring-spotify"
                >
                <div>
                  <h3 class="text-2xl font-bold">{{user.name}}</h3>
                  <p class="text-gray-400">{{user.email}}</p>
                </div>
              </div>
            </div>
            
            <div class="glass p-6 rounded-2xl">
              <h2 class="text-2xl font-bold mb-6">Your Stats</h2>
              <div class="grid grid-cols-3 gap-4">
                <div class="text-center p-4 bg-slate-800 rounded-lg">
                  <p class="text-3xl font-bold text-spotify">{{stats.totalMoments}}</p>
                  <p class="text-sm text-gray-400">Moments</p>
                </div>
                <div class="text-center p-4 bg-slate-800 rounded-lg">
                  <p class="text-3xl font-bold text-spotify">{{stats.totalTracks}}</p>
                  <p class="text-sm text-gray-400">Tracks</p>
                </div>
                <div class="text-center p-4 bg-slate-800 rounded-lg">
                  <p class="text-3xl font-bold text-spotify capitalize">{{stats.favoriteMood}}</p>
                  <p class="text-sm text-gray-400">Top Mood</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="space-y-6">
            <div class="glass p-6 rounded-2xl">
              <h3 class="text-xl font-bold mb-4">Spotify Connection</h3>
              <div ng-if="spotify.isConnected" class="space-y-4">
                <div class="flex items-center space-x-2 text-spotify">
                  <span>‚úì</span>
                  <span>Connected</span>
                </div>
                <button 
                  ng-click="disconnectSpotify()"
                  class="w-full px-4 py-2 bg-red-500 hover:bg-red-600 rounded-lg text-white font-semibold transition-colors"
                >
                  Disconnect
                </button>
              </div>
              <div ng-if="!spotify.isConnected">
                <a 
                  href="#/spotify-connect"
                  class="block w-full bg-spotify px-4 py-2 rounded-lg text-white font-semibold text-center hover:bg-green-600 transition-colors"
                >
                  Connect Spotify
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </script>
  
  <!-- Firebase SDK v10 (modular) -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js';
    import { getAuth } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js';
    import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js';
    // ‚ö†Ô∏è REPLACE WITH YOUR FIREBASE CONFIG FROM CONSOLE
   // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAy6K7Gzm1kLejClI1xyvt6UXRN5Ei6ZMc",
  authDomain: "soundtrackgen-2025.firebaseapp.com",
  databaseURL: "https://soundtrackgen-2025-default-rtdb.firebaseio.com",
  projectId: "soundtrackgen-2025",
  storageBucket: "soundtrackgen-2025.firebasestorage.app",
  messagingSenderId: "141249110722",
  appId: "1:141249110722:web:43df98929240d29c90515b",
  measurementId: "G-6J92YQT6YW"
};
    

    // Initialize Firebase
    
  window.firebaseApp = initializeApp(firebaseConfig);
  window.auth = getAuth();
  window.db = getFirestore();

    
    // Enable offline persistence
    enableIndexedDbPersistence(window.db).catch(function(err) {
      if (err.code === 'failed-precondition') {
        console.warn('Firestore persistence failed: Multiple tabs open');
      } else if (err.code === 'unimplemented') {
        console.warn('Firestore persistence not available');
      }
    });
    
    console.log('Firebase initialized successfully');
  </script>
  
  <!-- Scripts -->
  <script src="app.js"></script>
  <script>
    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Intersection Observer for scroll animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            entry.target.classList.add('fade-in-up');
            observer.unobserve(entry.target);
          }
        });
      }, observerOptions);
      
      setTimeout(function() {
        document.querySelectorAll('.observe-on-scroll').forEach(function(el) {
          observer.observe(el);
        });
      }, 100);
    });
  </script>
</body>
</html>
